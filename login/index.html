<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">

          <script src="https://www.gstatic.com/firebasejs/4.1.2/firebase.js"></script>
  <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
  <title>SpamSort | Sign Up</title>
  
  
      
      <div id="iic"><link rel="stylesheet" href="css/style.css"></div>
  
</head>

<body>
<h1 id="logo">SpamSort</h1>
 <div class="title-container">
  <h1 class="title">You must be logged in to add a Spam case</h1>
  </div>
<a href="../" class="myButton">Search Spammers</a>
  <div class="login-page">
  <div class="form">
    <form class="register-form">
      <input id="inName" type="text" placeholder="name"/>
      <input id = "inPass" type="password" placeholder="password"/>
      <input id = "inEmail" type="text" placeholder="email address"/>
      <button type="button" onclick="register()">create</button>
      <p class="message">Already registered? <a href="#">Sign In</a></p>
      <p class="message"><p id="errormsg" style="color:red"></p>
    </form>
    <form class="login-form">
      <input id="logEmail" type="text" placeholder="email"/>
      <input id= "logPass" type="password" placeholder="password"/>
      <button type="button" onclick="login()">login</button>
      <p class="message">Not registered? <a href="#">Create an account</a></p>
      <p class="message"><p id="errormsg2" style="color:red"></p>
    </form>
  </div>
</div>


  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

    <script src="js/index.js"></script>
  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js'></script>
<script src="https://www.gstatic.com/firebasejs/4.1.2/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDcvxKgsZCAaeRfqDe0PlPcgESZDwuJwAU",
    authDomain: "friendlychat-c4e05.firebaseapp.com",
    databaseURL: "https://friendlychat-c4e05.firebaseio.com",
    projectId: "friendlychat-c4e05",
    storageBucket: "friendlychat-c4e05.appspot.com",
    messagingSenderId: "63768838798"
  };
  firebase.initializeApp(config);
</script>
    <script> 
       firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    // User is signed in.
window.location = "/form/";
  }
});
    var register=function(){
    var regName = document.getElementById("inName").value;
    var regPass = document.getElementById("inPass").value;
    var regEmail = document.getElementById("inEmail").value;
    console.log(regEmail); console.log(regPass); console.log(regName);

      firebase.auth().createUserWithEmailAndPassword(regEmail, regPass).catch(function(error) {
  // Handle Errors here.
      var errorCode = error.code;
      var errorMessage = error.message;

document.getElementById("errormsg").innerHTML = errorMessage;
      console.log(errorMessage);
      console.log(errorCode);
  // ...
    });
       document.getElementById("errormsg").innerHTML = "<div style=\"color:green\">Signed Up succesfully, you may login now!</div>";
  }

var login = function(){
  var logEmail = document.getElementById("logEmail").value;
  var logPass = document.getElementById("logPass").value;
  firebase.auth().signInWithEmailAndPassword(logEmail, logPass).catch(function(error) {
  // Handle Errors here.
  var errorCode = error.code;
  var errorMessage = error.message;
  document.getElementById("errormsg2").innerHTML = errorMessage;
      console.log(errorMessage);
      console.log(errorCode);
  // ...
});
  alert("Successfully logged in!")
   document.getElementById("errormsg2").innerHTML = "<div style=\"color:green\">Logged in succesfully!</div>";
   firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    // User is signed in.
window.location = "../form/index.html";
  }
});
}




    </script>

</body>
</html>
